# Типы данных в SQL Server — полный обзор

## Exact numerics (точные цифры)

1. **tinyint**
    
    - **Описание:** Целочисленный тип без знака.
    - **Размер хранения:** 1 байт.
    - **Диапазон значений:** 0–255.
    - **Применение:** Малые счётчики, флаги со множеством значений (например статус с небольшим числом состояний).
        
2. **smallint**
    
    - **Описание:** Целое число со знаком, компактный.
    - **Размер хранения:** 2 байта.
    - **Диапазон значений:** -32 768 – 32 767.
    - **Применение:** Когда `int` избыточен, но требуется отрицательные значения.
        
3. **int**
    
    - **Описание:** Стандартный целочисленный тип в SQL Server.
    - **Размер хранения:** 4 байта.
    - **Диапазон значений:** -2 147 483 648 – 2 147 483 647.
    - **Применение:** Идентификаторы, счётчики, общие целочисленные значения.
        
4. **bigint**
    
    - **Описание:** Большое целое число со знаком.
    - **Размер хранения:** 8 байт.
    - **Диапазон значений:** -9 223 372 036 854 775 808 – 9 223 372 036 854 775 807.
    - **Применение:** Когда ожидается очень большой объём либо авто генерируемые глобальные идентификаторы.
        
5. **bit**
    
    - **Описание:** Для булевых/двоичных флагов.
    - **Размер хранения:** 1 бит (SQL Server упаковывает до 8 колонок `bit` в 1 байт, 9–16 колонок — в 2 байта и т.д.).
    - **Диапазон значений:** 0, 1, NULL.
    - **Примечание:** `TRUE`/`FALSE` преобразуются в 1/0.
        
6. **decimal(p, s) / numeric(p, s)**
    
    - **Описание:** Фиксированная точность и масштаб (денежные и другие точные дробные значения). `decimal` и `numeric` — синонимы.
    - **Диапазон значений:** зависит от precision `p` (максимум 38 цифр), общие границы порядка ±(10^38 − 1).
    - **Размер хранения:** зависит от precision:
        
        - p 1–9 — 5 байт
        - p 10–19 — 9 байт
        - p 20–28 — 13 байт
        - p 29–38 — 17 байт
            
    - **Применение:** Денежные расчёты, финансы, когда нужна точность при арифметике с фиксированной запятой.
        
7. **money / smallmoney**
    
    - **Описание:** Специальные типы для хранения денежных значений (с фиксированной точностью до 4 знаков после запятой).
    - **Размер хранения:** `money` — 8 байт; `smallmoney` — 4 байта.
    - **Диапазон значений:**
        
        - `money`: −922 337 203 685 477.5808 … 922 337 203 685 477.5807
        - `smallmoney`: −214 748.3648 … 214 748.3647
            
    - **Примечание:** Некоторые практики рекомендуют `decimal(19,4)` вместо `money` для переносимости и однозначного поведения округления.
        

---

## Approximate numerics (приближённые числа)

1. **float(n)**
    
    - **Описание:** Числа с плавающей точкой (обычно для научных/инженерных расчётов).
    - **Синтаксис:** `float(n)`, где `n` — количество битов значащих цифр (точность) от 1 до 53. Если `n` опущено — эквивалент `float(53)` (64‑бит double).
        
    - **Размер хранения:**
        
        - при `n` 1–24 — 4 байта (одинарная точность)
        - при `n` 25–53 — 8 байт (двойная точность)
            
    - **Применение:** Статистические, научные расчёты; не использовать для финансов, где нужна абсолютная точность.
        
2. **real**
    
    - **Описание:** Синоним `float(24)` — 4 байта (одинарная точность)
    - **Применение:** Когда требуется компактное плавающее представление с меньшей точностью.
        

**Важно:** приблизительная арифметика даёт ошибки округления — при критичной точности используйте `decimal`.

---

## Date and time (дата и время)

1. **date**
    
    - **Формат:** `YYYY-MM-DD`.
    - **Диапазон:** 0001-01-01 … 9999-12-31.
    - **Точность:** 1 день.
    - **Размер хранения:** 3 байта.
        
2. **time(p)**
    
    - **Формат:** `HH:MM:SS[.fraction]`.
    - **Диапазон:** 00:00:00.0000000 … 23:59:59.9999999.
    - **Точность:** до 100 наносекунд (7 знаков дробной секунды). `p` — от 0 до 7, по умолчанию 7.
    - **Размер хранения:** 3–5 байт (в зависимости от точности).
        
3. **datetime2(p)**
    
    - **Описание:** Расширенная версия `datetime`, рекомендуется для новых разработок.
    - **Диапазон:** 0001-01-01 … 9999-12-31.
    - **Точность:** до 100 наносекунд; `p` 0–7.
    - **Размер хранения:** 6–8 байт (зависит от `p`; есть дополнительный байт для хранения precision в некоторых реализациях).
        
4. **datetimeoffset(p)**
    
    - **Описание:** Как `datetime2` + смещение часового пояса (offset), полезен для распределённых систем.
    - **Диапазон/точность:** как `datetime2` + хранение смещения.
    - **Размер хранения:** 8–10 байт (включая смещение).
        
5. **datetime** (устаревающий для новых работ)
    
    - **Диапазон:** 1753-01-01 … 9999-12-31.
    - **Точность:** ~3.33 мс (миллисекунды с шагом 0.00333...s).
    - **Размер хранения:** 8 байт.
        
6. **smalldatetime**
    
    - **Диапазон:** 1900-01-01 … 2079-06-06.
    - **Точность:** 1 минута.
    - **Размер хранения:** 4 байта.
        

**Рекомендация:** для новых приложений используйте `date`, `time`, `datetime2`, `datetimeoffset` — они соответствуют стандарту и дают большую точность/диапазон.

---

## Character strings (символьные строки — не‑Unicode)

1. **char(n)**
    
    - **Описание:** Фиксированная длина символьной строки.
    - **Размер хранения:** `n` байт (1 ≤ n ≤ 8000). Если строка короче — правые пробелы дополняются.
    - **Применение:** Колонки плотного фиксированного формата (коды, статусы фиксированной длины).
        
2. **varchar(n)** / **varchar(max)**
    
    - **Описание:** Переменная длина (до 8000 байт) или `max` (~2 ГБ данных: фактически до 2^31‑1 байт).
    - **Примечание:** `varchar(max)` хранит большие объёмы и может использоваться вместо устаревшего `text`.
    - **Поведение:** Не дополняет правые пробелы при хранении.
        
3. **text** _(deprecated)_
    
    - **Описание:** Устаревший тип для больших текстов; вместо него используйте `varchar(max)`.
        
**Коллация и сравнения:** коллация применяется к `char`/`varchar` и влияет на сортировку/сравнение строк.

---

## Unicode character strings (Unicode-строки)

1. **nchar(n)**
    
    - **Описание:** Фиксированная длина символов Unicode.
    - **Размер хранения:** `n` × 2 байта (1 ≤ n ≤ 4000).
    - **Применение:** Когда требуется хранить международные символы фиксированной длины.
        
2. **nvarchar(n)** / **nvarchar(max)**
    
    - **Описание:** Переменная длина Unicode (до 4000 символов) или `max` (до ~1Г Unicode символов).
    - **Размер хранения:** 2 байта на символ плюс небольшая служебная информация для `max`.
        
3. **ntext** _(deprecated)_
    
    - **Описание:** Устаревший; используйте `nvarchar(max)`.
        
**Рекомендация:** для мультиязычных приложений всегда предпочитайте `nvarchar`/`nchar`.

---

## Binary strings (двоичные данные)

1. **binary(n)**
    
    - **Описание:** Фиксированная двоичная строка.
    - **Размер хранения:** `n` байт (1 ≤ n ≤ 8000).
    - **Применение:** Хранение хэшей, фиксированных бинарных блоков.
        
2. **varbinary(n)** / **varbinary(max)**
    
    - **Описание:** Переменная длина двоичных данных; `varbinary(max)` заменяет `image`.
    - **Применение:** Файлы, изображения, бинарные документы, FILESTREAM (см. ниже).
        
3. **image** _(deprecated)_
    
    - **Описание:** Устаревший; вместо него используйте `varbinary(max)` и FILESTREAM/FILETABLE при необходимости.
        
---

## Другие типы данных и специальные типы

1. **uniqueidentifier**
    
    - **Описание:** GUID — глобально уникальный идентификатор.
    - **Размер хранения:** 16 байт.
    - **Применение:** Идентификаторы в распределённых системах, когда требуется уникальность по разным серверам.
        
2. **rowversion / timestamp**
    
    - **Описание:** Автоматически увеличивающееся бинарное значение, используется для версионирования строк.
    - **Размер хранения:** 8 байт.
    - **Примечание:** `timestamp` — устаревший синоним; использовать `rowversion`.
        
3. **sql_variant**
    
    - **Описание:** Позволяет хранить значения разных базовых типов в одной колонке (с метаданными о типе).
    - **Ограничения/размер:** Максимальная длина примерно 8016 байт (включая метаданные); не поддерживает текст/ntext/image/timestamp как базовые типы.
    - **Применение:** Редко; там, где требуется гибкость типов, но нужно помнить о производительности и индексировании.
        
4. **xml**
    
    - **Описание:** Тип для хранения XML-документов; поддерживает XQuery, XML индексирование, схемы.
    - **Размер:** Хранится как текст/типизированное представление; возможно крупное потребление места.
    - **Применение:** Хранение структурированных XML-данных с возможностью запросов по XPath/XQuery.
        
5. **geometry / geography**
    
    - **Описание:** Пространственные типы: `geometry` — плоские координаты (проектированные), `geography` — геодезические (широта/долгота на эллипсоиде).
    - **Особенности:** Поддержка пространственных индексов и пространственных операций.
        
6. **hierarchyid**
    
    - **Описание:** Специализированный тип для представления древовидных иерархий (деревья).
    - **Размер/ограничения:** Кодировке отводится до 892 байт; на практике часто компактнее (несколько байт) и зависит от глубины и разветвлённости.

    - **Применение:** Организационные структуры, родитель‑/дети‑иерархии.
7. **cursor**
    
    - **Описание:** Ссылочный тип для указателя на результирующий набор курсора (используется в T‑SQL).
        
8. **table**
    
    - **Описание:** Локальный табличный тип, используется для переменных таблицы и табличных параметров (table-valued parameters).
        
9. **FILESTREAM / FileTable**
    
    - **Описание:** Техническая возможность хранить BLOB (varbinary(max)) в файловой системе, управляемой SQL Server; полезно для больших двоичных объектов с файловым доступом.
        
10. **JSON**
    
    - **Примечание:** JSON не имеет отдельного типа — хранится в `nvarchar(max)`; поддерживаются функции для работы с JSON (`OPENJSON`, `JSON_VALUE` и т.д.).

